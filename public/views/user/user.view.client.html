<ng-include src="'views/common/nav-header.html'"></ng-include>

<section id="profile-main-section"
         tr-profile-tab>


    <div id="profile-pic">
        <img ng-src="{{model.user.profilePic}}" class="tr-horizontal-center">
    </div>

    <div id="profile-tablist-bar"
         class="row tr-large-device-content">
        <div class="col-sm-3">

        </div>
        <div class="col-sm-9" >
            <!--<ul class="tr-tablist">-->
                <!--<li>-->
                    <!--<a href="">-->
                        <!--Enrolled-->
                    <!--</a>-->
                <!--</li>-->
                <!--<li>-->
                    <!--<a href="">-->
                        <!--Completed-->
                    <!--</a>-->
                <!--</li>-->
                <!--<li>-->
                    <!--<a href="">-->
                        <!--Interested-->
                    <!--</a>-->
                <!--</li>-->
            <!--</ul>-->
            <div id="profile-tablist">
                <a href=""
                   data-target="#enrolled"
                   class="tr-tab tr-active">
                    Enrolled
                </a>
                <a href=""
                   data-target="#completed"
                   class="tr-tab">
                    Completed
                </a>
                <a href=""
                   data-target="#interested"
                   class="tr-tab">
                    Insterested
                </a>
                <a href=""
                   data-target="#created"
                   class="tr-tab"
                   ng-show="model.user.isFaculty">
                    Created
                </a>
                <a href=""
                   data-target="#pending"
                   class="tr-tab"
                   ng-show="model.user.isAdmin">
                    Validation Requests
                    <span class="badge">{{model.validationRequests.length}}</span>
                </a>
                <a href=""
                   data-target="#all-users"
                   class="tr-tab"
                   ng-show="model.user.isAdmin"
                   ng-click="model.getAllUsers()">
                    All Users
                </a>
                <a href=""
                   class="tr-tab"
                   data-target="#account-history">
                    Account History
                </a>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3" id="user-information">
            <div id="info-name">
                <b>
                    {{model.user.name}}
                </b>
            </div>
            <div id="info-email">
                {{model.user.email}}
            </div>
            <div ng-show="model.user.isFaculty">
                <div>
                    <a id="role-faculty">
                        Faculty
                    </a>
                </div>
                <div id="info-faculty">
                    {{model.user.title}} <br>
                    {{model.user.affiliation}} <br>
                    {{model.user.workWebsite}} <br>
                    Validated by {{model.user.validator}} <br>
                    on {{model.user.validatedOn}}<br>
                </div>
            </div>

            <div ng-show="model.user.isAdmin">
                <a class="tr-role-admin">
                    Admin
                </a>
                <div ng-show="model.user.grantor" id="info-admin">
                    Granted by {{model.user.grantor}} on {{model.user.grantedOn}}
                </div>
            </div>

            <div id="info-address">
                {{model.user.street}}<br>
                {{model.user.city}}, {{model.user.postalCode}} <br>
                {{model.user.country}}
            </div>
            <!--<div id="info-phone">-->
                <!--{{model.user.}}-->
            <!--</div>-->
        </div>
        <div class="col-sm-8">
            <div id="profile-tabpane">

                <div class="tr-failure-message"
                     ng-show="model.actionDone && !model.operationSucceeded">
                    Operation Failed!
                </div>

                <div class="tr-success-message"
                     ng-show="model.actionDone && model.operationSucceeded">
                    Operation Succeeded!
                </div>

                <ul class="list-group tr-tab-content tr-active"
                    id="enrolled"
                    data-tab-type="list">
                    <li class="list-group-item" ng-repeat="course in model.courses.enrolled">
                        <div class="row">
                            <div class="col-sm-2 hidden-xs tr-course-list-img">
                                <img ng-src="{{course.icon}}">
                                <ng-rate-it ng-model="course.avgRating" read-only="true"></ng-rate-it>
                            </div>
                            <div class="col-sm-7 tr-course-list-info">
                                <h5><b>{{course.primaryTopic}}</b></h5>
                                <h4>{{course.name}}</h4>
                                <div ng-show="course.secondaryTopic">Related topic: {{course.secondaryTopic}}</div>
                            </div>
                            <div class="col-sm-3 tr-course-list-date">
                                <h5>{{course.eventTime}}</h5>
                                <a href="#!/course/{{course.id}}">View</a>
                            </div>
                        </div>
                    </li>
                </ul>

                <ul class="list-group tr-tab-content"
                    id="completed"
                    data-tab-type="list">
                    <li class="list-group-item" ng-repeat="course in model.courses.completed">
                        <div class="row">
                            <div class="col-sm-2 hidden-xs tr-course-list-img">
                                <img ng-src="{{course.icon}}">
                                <ng-rate-it ng-model="course.avgRating" read-only="true"></ng-rate-it>
                            </div>
                            <div class="col-sm-7 tr-course-list-info">
                                <h5><b>{{course.primaryTopic}}</b></h5>
                                <h4>{{course.name}}</h4>
                                <div ng-show="course.secondaryTopic">Related topic: {{course.secondaryTopic}}</div>
                            </div>
                            <div class="col-sm-3 tr-course-list-date">
                                <h5>{{course.eventTime}}</h5>
                                <a href="#!/course/{{course.id}}">View</a>
                            </div>
                        </div>
                    </li>
                </ul>

                <ul class="list-group tr-tab-content"
                    id="interested"
                    data-tab-type="list">
                    <li class="list-group-item" ng-repeat="course in model.courses.interested">
                        <div class="row">
                            <div class="col-sm-2 hidden-xs tr-course-list-img">
                                <img ng-src="{{course.icon}}">
                                <ng-rate-it ng-model="course.avgRating" read-only="true"></ng-rate-it>
                            </div>
                            <div class="col-sm-7 tr-course-list-info">
                                <h5><b>{{course.primaryTopic}}</b></h5>
                                <h4>{{course.name}}</h4>
                                <div ng-show="course.secondaryTopic">Related topic: {{course.secondaryTopic}}</div>
                            </div>
                            <div class="col-sm-3 tr-course-list-date">
                                <a href="#!/course/{{course.id}}">View</a>
                            </div>
                        </div>
                    </li>
                </ul>

                <ul class="list-group tr-tab-content"
                    id="created"
                    data-tab-type="list">
                    <li class="list-group-item" ng-repeat="course in model.courses.created">
                        <div class="row">
                            <div class="col-sm-2 hidden-xs tr-course-list-img">
                                <img ng-src="{{course.icon}}">
                                <ng-rate-it ng-model="course.avgRating" read-only="true"></ng-rate-it>
                            </div>
                            <div class="col-sm-7 tr-course-list-info">
                                <h5><b>{{course.primaryTopic}}</b></h5>
                                <h4>{{course.name}}</h4>
                                <div ng-show="course.secondaryTopic">Related topic: {{course.secondaryTopic}}</div>
                            </div>
                            <div class="col-sm-3 tr-course-list-date">
                                <a href="#!/course/{{course.id}}">View</a>
                            </div>
                        </div>
                    </li>
                </ul>

                <ul class="list-group tr-tab-content"
                    id="pending"
                    data-tab-type="list">
                    <li ng-repeat="request in model.validationRequests" class="list-group-item">
                        <div class="row">
                            <div class="col-xs-9">
                                <h4>{{request.fromName}} </h4>
                                <h5><b>{{request.fromEmail}}</b></h5>
                                {{request.title}} <br>
                                {{request.affiliation}} <br>
                                {{request.workWebsite}} <br>
                            </div>
                            <div class="col-xs-3 tr-validation-options">
                                <a class="tr-validation-true"
                                   ng-click="model.assessFaculty(request.fromId,true)">
                                    Validate
                                </a>
                                <a class="tr-validation-false"
                                   ng-click="model.assessFaculty(request.fromId,false)">
                                    Disapprove
                                </a>
                            </div>
                        </div>

                    </li>
                </ul>

                <div class="tr-tab-content row"
                     id="all-users"
                     data-tab-type="normal">

                    <div class="col-sm-4" ng-repeat="user in model.allUsers">
                        <div class="tr-user-profile">
                            <img ng-src="{{user.profilePic}}" class="tr-horizontal-center">
                            <div class="tr-user-profile-info">
                                {{user.id}} <br>
                                <b>{{user.name}}</b> <br>
                                {{user.email}} <br>
                                <div ng-show="user.isAdmin">
                                    <a class="tr-role-admin">
                                        Admin
                                    </a>
                                </div>

                                <div ng-show="!user.isAdmin">
                                    <a href=""
                                       class="tr-grant-option"
                                       ng-click="model.grantAdminPower(user.id)">
                                        Grant Admin Power
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="tr-tab-content"
                     id="account-history"
                     data-tab-type="list">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <div class="row">
                                <div class="col-xs-4">
                                    Course Name
                                </div>
                                <div class="col-xs-2">
                                    Enrollment Date
                                </div>
                                <div class="col-xs-2">
                                    Completion Date
                                </div>
                                <div class="col-xs-4">
                                    Amount Paid (Confirmation Code)
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item" ng-repeat="item in model.history">
                            <div class="row">
                                <div class="col-xs-4">
                                    {{item.courseName}}
                                </div>
                                <div class="col-xs-2">
                                    {{item.enrolledOn}}
                                </div>
                                <div class="col-xs-2">
                                    {{item.completedOn}}
                                </div>
                                <div class="col-xs-4">
                                    {{item.amountPaid}}
                                </div>
                            </div>
                        </li>
                    </ul>

                    <hr>

                    <h3 class="pull-right">Total: {{model.total}}</h3>
                </div>

            </div>

        </div>
        <!--<div class="col-sm-3" >-->
            <!--<div id="account-history">-->
                <!--<div id="account-history-header">-->
                    <!--<b>Account History</b>-->
                <!--</div>-->
                <!--<div id="total-spent">-->
                    <!--Total Spent:-->
                <!--</div>-->
                <!--<hr>-->
                <!--<div class="row">-->
                    <!--<div class="col-xs-4">-->
                        <!--<i>2017-12-03</i>-->
                    <!--</div>-->
                    <!--<div class="col-xs-8">-->
                        <!--dalsfjadsklj dafdsf adfadsf-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
    </div>
</section>
